<!-- templates/shortcodes/protected.html - DEBUG VERSION -->
{% set container_id = id | default(value="protected-" ~ path | replace(from="/", to="-") | replace(from=".", to="-")) %}
{% set loading_text = loading | default(value="Loading protected content...") %}
{% set css_class = class | default(value="protected") %}
<div id="{{ container_id }}" class="{{ css_class }}" data-protected-path="{{ path }}" data-loading-text="{{ loading_text }}">
  {{ loading_text }}
</div>
{% if not config.extra.protected_content_script_loaded %}
<!-- Only load scripts once per page -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="/js/protected.js"></script>
<style>
  .protected {
    }

    .protected-error {
      color: #dc3545;
      padding: 1rem;
      border: 1px solid #dc3545;
      border-radius: 4px;
      background: #f8d7da;
    }

    .protected-loading {
      color: #6c757d;
      font-style: italic;
    }

    .protected-logged-out {
      color: #856404;
      background-color: #fff3cd;
      border: 1px solid #ffeaa7;
      padding: 1rem;
      border-radius: 4px;
    }

    .protected-image-error {
      border: 2px dashed #dc3545;
      padding: 1rem;
      background: #f8d7da;
      color: #dc3545;
    }

    .protected-image-error::before {
      content: "ðŸš« ";
    }

    /* Login form styles */
    .protected-login-form {
      background: #ffffff;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 1.5rem;
      max-width: 400px;
    }

    .protected-login-form h4 {
      margin-top: 0;
      margin-bottom: 1rem;
      color: #495057;
      font-size: 1.1rem;
    }

    .login-form .form-group {
      margin-bottom: 1rem;
    }

    .login-form label {
      display: block;
      margin-bottom: 0.25rem;
      font-weight: 500;
      color: #495057;
      font-size: 0.9rem;
    }

    .login-form input {
      width: 100%;
      padding: 0.5rem 0.75rem;
      border: 1px solid #ced4da;
      border-radius: 4px;
      font-size: 0.9rem;
      transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
      box-sizing: border-box;
    }

    .login-form input:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
    }

    .login-button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background-color 0.15s ease-in-out;
      width: 100%;
    }

    .login-button:hover:not(:disabled) {
      background-color: #0056b3;
    }

    .login-button:disabled {
      background-color: #6c757d;
      cursor: not-allowed;
    }

    .login-error {
      color: #dc3545;
      font-size: 0.875rem;
      margin-top: 0.5rem;
      padding: 0.5rem;
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
      border-radius: 4px;
    }
</style>
{% endif %}