{% set data = load_data(path="static/toml/topic_macros.toml") %}
<div class="topic_macros_toml_load">
  {% for section_name, section_data in data %}
  {{ "## " ~ section_data.topic | markdown | safe }}
  <div class="code-block-container">
    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
    <div class="txt">{{ section_data.content }}</div>
  </div>
  {% endfor %}
</div>
<link rel="stylesheet" href="/css/topic_macros_toml_load.css">
<script>
  function copyToClipboard(button) {
    const codeBlock = button.nextElementSibling; // Get the sibling `.txt` div
    const text = codeBlock.textContent || codeBlock.innerText;
    
    navigator.clipboard.writeText(text).then(() => {
      button.textContent = "Copied!"; // Temporarily change button text
      setTimeout(() => button.textContent = "Copy", 2000); // Revert after 2 seconds
    }).catch(err => {
      console.error("Failed to copy text: ", err);
      button.textContent = "Error";
      setTimeout(() => button.textContent = "Copy", 2000);
    });
  }
</script>